(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=function(a,b){return function(){return a.apply(b,arguments)}},v=Object.prototype.hasOwnProperty,w=function(a,b){function d(){this.constructor=a}for(var c in b)v.call(b,c)&&(a[c]=b[c]);d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype;return a},x=Array.prototype.slice,y=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1};b=function(){function a(a,b,c){this.name=a,this.path=b,this.config=c}return a}(),e=function(){function a(a){this.verbose=u(this.verbose,this),this.error=u(this.error,this),this.eventlog=u(this.eventlog,this),this.log=u(this.log,this),this.setDebug=u(this.setDebug,this),this.config={},this.environment={},this.performance={tools:{fpsstats:{show:function(a){var b;b=new Stats,b.domElement.style.position="absolute",b.domElement.style.left="50px",b.domElement.style.top="50px",b.domElement.style.opacity=.7,b.domElement.id="js_fps_stats",console.log("stats",b),$("body").append(b.domElement),setInterval(function(){return b.update()},1e3/60)},hide:function(a){$("#js_fps_stats").hide()}}}},this.debug={logging:!0,eventlog:!0,verbose:!0}}w(a,b),a.prototype.setDebug=function(a){this.debug=a;return console.log("[CoreDev] Debug has been set.",this.debug)},a.prototype.log=function(){var a,b,c;c=arguments[0],b=arguments[1],a=3<=arguments.length?x.call(arguments,2):[],a==null&&(a="{no context}"),this.debug.logging===!0&&console.log.apply(console,["["+c+"] INFO: "+b].concat(x.call(a)))},a.prototype.eventlog=function(){var a,b;b=arguments[0],a=2<=arguments.length?x.call(arguments,1):[],a==null&&(a="{no context}"),this.debug.eventlog===!0&&console.log.apply(console,["[EventLog] "+b].concat(x.call(a)))},a.prototype.error=function(){var a,b,c;c=arguments[0],b=arguments[1],a=3<=arguments.length?x.call(arguments,2):[],this.debug.logging===!0&&console.log.apply(console,["["+c+"] ERROR: "+b].concat(x.call(a)))},a.prototype.verbose=function(){var a,b,c;c=arguments[0],b=arguments[1],a=3<=arguments.length?x.call(arguments,2):[],this.debug.verbose===!0&&this.log.apply(this,[c,b].concat(x.call(a)))};return a}(),j=function(){function a(a){this.version={minor:null,major:null,release:null,setVersion:function(a,b,c){this.minor=a,this.major=b,this.release=c}},this.drivers={registry:{},register:u(function(b,c,d,e,f,g){var h;this.drivers.registry[b]==null&&(this.drivers.registry[b]={}),this.drivers.registry[b][c]={initialized:f,preference:e,registered:!0,hook_point:d,init_callback:g},h={module:b,name:c,hook:d},a.state.events.triggerEvent("DRIVER_REGISTERED",h)},this),resolve:function(a,b){var c,d,e,f,g,h;if(this.registry[a]==null)return!1;if(b!=null)return this.registry[a][b]==null?!1:this.registry[a][b].hook_point;h=null,g=null,f=0;for(e in this.registry[a]){d=this.registry[a][e];if(d.preference!=null){typeof d.preference=="function"?typeof $!="undefined"&&$!==null?c=d.preference($.fatcatmap):c=d.preference(window.fatcatmap):c=d.preference;if(c!==null&&typeof c!="boolean")c>f&&(g=d);else{if(c===!1)continue;if(c===!0)g=d;else continue}}else h=d}return g!==null?g.hook_point:h!==null?h.hook_point:null}}}w(a,b);return a}(),d=function(){function a(a){this._data={},this.platform={},this.capabilities={},this._data={browsers:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],os:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]}}w(a,b),a.prototype._makeMatch=function(a){var b,c,d,e,f,g;g=[];for(e=0,f=a.length;e<f;e++){d=a[e],c=d.string,b=d.prop,this._data.versionSearchString=d.versionSearch||d.identity;if(c!==null){if(d.string.indexOf(d.subString)!==-1)return d.identity}else if(b)return d.identity}return g},a.prototype._makeVersion=function(a){var b;b=a.indexOf(this._data.versionSearchString);if(b!==-1)return parseFloat(a.substring(b+this._data.versionSearchString.length+1))},a.prototype.discover=function(){var a,b,c,d,e;a=this._makeMatch(this._data.browsers)||"unknown",e=this._makeVersion(navigator.userAgent)||this._makeVersion(navigator.appVersion)||"unknown",c=this._makeMatch(this._data.os)||"unknown";if(a==="iPod/iPhone"||a==="Android")d="mobile",b=!1;this.platform={os:c,type:d,vendor:navigator.vendor,product:navigator.product,browser:a,version:e,flags:{mobile:b,webkit:$.browser.webkit,msie:$.browser.msie,opera:$.browser.opera,mozilla:$.browser.mozilla}};return this.capabilities={cookies:navigator.cookieEnabled,ajax:$.support.ajax,canvas:Modernizr.canvas,geolocation:Modernizr.geolocation,svg:Modernizr.svg,workers:Modernizr.webworkers,history:Modernizr.history,sockets:Modernizr.websockets,storage:{local:Modernizr.localstorage,session:Modernizr.sessionstorage,websql:Modernizr.websqldatabase,object:Modernizr.indexeddb}}};return a}(),i=function(){function a(a){this.ui={indicators:{globalIndicatorQueue:0,startSpinner:function(){this.globalIndicatorQueue===0&&$("#globalActivityIndicator").animate({opacity:1}).removeClass("hidden");return this.globalIndicatorQueue++},stopSpinner:function(){this.globalIndicatorQueue--;if(this.globalIndicatorQueue===0)return $("#globalActivityIndicator").animate({opacity:0},"fast",function(){return $(this).addClass("hidden")})}}},this.events={registry:[],callchain:{},history:[],registerEvent:u(function(b){this.events.registry.push(b),this.events.callchain[b]=[],a.dev.debug.eventlog===!0&&a.dev.verbose("EventLog","Event Registered: "+b);return this},this),registerHook:u(function(b,c,d){var e;typeof d===null&&(d=!1),e={executed:!1,callback:function(a){return c(a)},runonce:d},this.events.callchain[b].push(e);if(a.dev.debug.verbose===!0)return a.dev.eventlog("Hook Registered",c,"on event",b)},this),triggerEvent:u(function(b,c){var d,e,f,g;a.dev.eventlog("Event Triggered",b,c||"{no context}");if(typeof this.events.callchain[b]!==null&&this.events.callchain[b].length>0){g=[];for(d in this.events.callchain[b]){if(this.events.callchain[b][d].executed===!0&&this.events.callchain[b][d].runonce===!0)continue;try{a.dev.debug.eventlog===!0&&a.dev.debug.verbose===!0&&a.dev.eventlog("Callchain",d,this.events.callchain[b]),e=this.events.callchain[b][d].callback(c),f={event:b,context:c,task:this.events.callchain[b][d],result:e}}catch(h){f={event:b,context:c,task:this.events.callchain[b][d],error:h},a.dev.error("Events","Calltask failed with error: ",h,f)}finally{this.events.history.push(f),this.events.callchain[b][d].executed=!0}}return g}},this)},this.session={},this.local={},this.elements={registry:{},get:function(a){return this.registry[a]},scan:function(){$("[data-element]").each({buildElement:function(a,b){return this.register(b.attr("data-element"),this.factory(b.attr("data-element"),"#"+b.attr("id"),b.attr("data-element-type")||null))}});return this},factory:function(a,b,c,d){var e;c==null&&(c="LayoutElement"),d==null&&(d={}),c===null&&(e=LayoutElement),c==="LayoutElement"?e=LayoutElement:c==="Panel"?e=Panel:c==="SuperPanel"?e=SuperPanel:c==="Navigation"&&(e=Navigation);return new e(a,b,d)},register:u(function(b,c){var d;this.events.registry[b]=c,d={id:b,element:c},a.state.events.triggerEvent("REGISTER_ELEMENT",d);return this.elements.registry[b]},this),_setState:function(a,b,c){this.registry[a]!==null&&this.registry[a]._setState(b,c);return this},_getState:function(a,b,c){c==null&&(c=null);return this.registry[a]!==null?this.registry[a]._getState(b,c):c},_loadState:function(a,b){if(this.registry[a]===null)throw"Must register element before setting state!";this.registry[a]._loadState(b);return this}},this.events.registerEvent("GLOBAL_ACTIVITY"),this.events.registerEvent("GLOBAL_ACTIVITY_FINISH"),this.events.registerHook("GLOBAL_ACTIVITY",u(function(){return this.ui.indicators.startSpinner()},this)),this.events.registerHook("GLOBAL_ACTIVITY_FINISH",u(function(){return this.ui.indicators.stopSpinner()},this)),$("body").bind("ajaxSend",u(function(){return this.events.triggerHook("GLOBAL_ACTIVITY")},this)),$("body").bind("ajaxComplete",u(function(){return this.events.triggerHook("GLOBAL_ACTIVITY_FINISH")},this))}w(a,b);return a}(),m=function(){function a(){a.__super__.constructor.apply(this,arguments)}w(a,Backbone.Model),a.prototype._type=function(){return"local"};return a}(),r=function(){function a(){a.__super__.constructor.apply(this,arguments)}w(a,Backbone.Model),a.prototype._type=function(){return"remote"};return a}(),n=function(){function a(){a.__super__.constructor.apply(this,arguments)}w(a,Backbone.Collection),a.prototype._noop=function(){};return a}(),g=function(){function a(a){window.Models={},a.state.events.registerEvent("MODEL_DEFINE"),a.state.events.registerEvent("MODEL_SYNC"),a.state.events.registerEvent("ENTITY_CREATE"),a.state.events.registerEvent("ENTITY_PUT"),a.state.events.registerEvent("ENTITY_GET"),a.state.events.registerEvent("ENTITY_DELETE"),this.local={schema:{}},this.remote={schema:{}},this.sync={_backboneSync:u(function(b,c,d){var e,f,g,h,i;h=d[0],f=d[1],e=3<=d.length?x.call(d,2):[];switch(b){case"create":a.state.events.triggerEvent("ENTITY_CREATE",{model:c,options:d});return a.rpc.api.data.create({object:c}).fulfill({success:i,failure:g},e);case"read":a.state.events.triggerEvent("ENTITY_GET",{model:c,options:d}),i=d[0],g=d[1],e=3<=d.length?x.call(d,2):[];return a.rpc.api.data.get({key:c.id}).fulfill({success:i,failure:g},e);case"update":a.state.events.triggerEvent("ENTITY_PUT",{model:c,options:d}),i=d[0],g=d[1],e=3<=d.length?x.call(d,2):[];return a.rpc.api.data.update({key:c.id,object:c.toJSON()}).fulfill({success:i,failure:g},e);case"delete":a.state.events.triggerEvent("ENTITY_DELETE",{model:c,options:d}),i=d[0],g=d[1],e=3<=d.length?x.call(d,2):[];return a.rpc.api.data["delete"]({key:c.id}).fulfill({success:i,failure:g},e);default:return a.rpc.dev.error("Model","Backbone bridge model sync got an unrecognized method.",{method:b,model:c,options:d})}},this)},Backbone.sync=this.sync}w(a,b);return a}(),window.LocalModel=m,window.RemoteModel=r,window.ModelCollection=n,c=function(){function a(a){a.state.events.registerEvent("STORAGE_READ"),a.state.events.registerEvent("STORAGE_WRITE"),a.state.events.registerEvent("STORAGE_CLEAR"),a.state.events.registerEvent("STORAGE_DELETE"),a.state.events.registerEvent("STORAGE_DB_LOAD"),a.state.events.registerEvent("STORAGE_DB_CLOSE"),a.state.events.registerEvent("STORAGE_DB_QUERY"),a.state.events.registerEvent("STORAGE_DB_CREATE"),a.state.events.registerEvent("STORAGE_DB_DELETE"),a.state.events.registerEvent("STORAGE_DB_SETVERSION"),a.state.events.registerEvent("STORAGE_DB_TRANSACTION"),a.state.events.registerEvent("STORAGE_COLLECTION_CLEAR"),a.state.events.registerEvent("STORAGE_COLLECTION_CREATE"),a.state.events.registerEvent("STORAGE_COLLECTION_DELETE"),this.storage={local:{_driver:null,_resolveDriver:u(function(){return this.storage.local._driver=a.sys.drivers.resolve("localstorage")},this),get:u(function(b){if(this.storage.local._driver!==null){a.state.events.triggerEvent("STORAGE_READ",{type:"local",mode:"key",key:b});return this.storage.local._driver.getValueByKey(b)}return null},this),set:u(function(b,c){if(this.storage.local._driver!==null){a.state.events.triggerEvent("STORAGE_WRITE",{type:"local",key:b,value:c});return this.storage.local._driver.setValueByKey(b,c)}return null},this),"delete":u(function(b){if(this.storage.local._driver!==null){a.state.events.triggerEvent("STORAGE_DELETE",{type:"local",key:b});return this.storage.local._driver.deleteByKey(b)}return null},this),clear:u(function(){if(this.storage.local._driver!==null){a.state.events.triggerEvent("STORAGE_CLEAR",{type:"local"});return this._driver.nuke()}return null},this),all:u(function(){if(this.storage.local._driver!==null){a.state.events.triggerEvent("STORAGE_READ",{type:"local",mode:"all"});return this.storage.local._driver.allValues()}return null},this)},session:{_driver:null,_resolveDriver:u(function(){return this.storage.session._driver=a.sys.drivers.resolve("sessionstorage")},this),get:u(function(b){if(this.storage.session._driver!==null){a.state.events.triggerEvent("STORAGE_READ",{type:"session",mode:"key",key:b});return this.storage.session._driver.getValueByKey(b)}return null},this),set:u(function(b,c){if(this.storage.session._driver!==null){a.state.events.triggerEvent("STORAGE_WRITE",{type:"session",key:b,value:c});return this.storage.session._driver.setValueByKey(b,c)}return null},this),"delete":u(function(a){if(this.storage.session._driver!==null){this.fcm.state.events.triggerEvent("STORAGE_DELETE",{type:"session",key:a});return this.storage.session._driver.deleteByKey(a)}return null},this),clear:u(function(){if(this.storage.session._driver!==null){a.state.events.triggerEvent("STORAGE_CLEAR",{type:"session"});return this.storage.session._driver.nuke()}return null},this),all:u(function(){if(this.storage.session._driver!==null){a.state.events.triggerEvent("STORAGE_READ",{type:"session",mode:"all"});return this.storage.session._driver.allValues()}return null},this)},object:{_db:null,_driver:null,_resolveDriver:u(function(){return this.storage.object._driver=this.fcm.sys.drivers.resolve("objectstorage")},this),_setDB:function(a){return this._db=a.target.result},_unsetDB:function(a){return this._db=null},_dbError:u(function(b){return a.dev.error("Storage","Error encountered in OBJECT storage.",b)},this),db:{load:u(function(b,c,d){var e;if(this.storage.object._driver!==null){a.state.events.triggerEvent("STORAGE_DB_LOAD",{type:"object",name:b}),{dbLoadSuccess:u(function(a){this.storage.object._setDB(a);return c(a.target.db)},this),dbLoadError:u(function(a){this.storage.object._dbError(a);return d(a)},this)},e=this.storage.object._driver.openDatabase(b,{success:dbLoadSuccess,error:dbLoadError});return e}return null},this),"delete":u(function(b,c){var d;if(this.storage.object._driver!==null){if(this.storage.object._db!==null){a.state.events.triggerEvent("STORAGE_DB_DELETE",{type:"object",db:this.storage.object._db}),{dbDeleteSuccess:u(function(a){this.storage.object._unsetDB(a);return b(a)},this),dbDeleteError:u(function(a){this.storage.object._dbError(a);return c(a)},this)},d=this.storage.object._driver.deleteDatabase(this.storage.object._db,{success:dbDeleteSuccess,error:dbDeleteError});return d}a.dev.error("Storage","Cannot delete database before it is loaded.");throw"Must open a database before it can be deleted."}return null},this),setVersion:u(function(b,c,d){var e;if(this.storage.object._driver!==null){if(this.storage.object._db!==null){a.state.events.triggerEvent("STORAGE_DB_SETVERSION",{type:"object",version:b,db:this.storage.object._db}),{dbSetVersionSuccess:u(function(a){return c(a)},this),dbSetVersionError:u(function(a){return d(a)},this)},e=this.storage.object._driver.setDatabaseVersion(this.storage.object._db,b,{success:dbSetVersionSuccess,error:dbSetVersionError});return e}a.dev.error("Storage","Cannot set database version before it is loaded.");throw"Must open a database before its version can be set."}return null},this),close:u(function(b,c){var d;if(this.storage.object._driver!==null){if(this.storage.object._db!==null){a.state.events.triggerEvent("STORAGE_DB_CLOSE",{type:"object",db:this.storage.object.db}),{dbCloseSuccess:u(function(a){return b(a)},this),dbCloseError:u(function(a){return c(a)},this)},d=this.storage.object._driver.closeDatabase(this.storage.object._db,{success:dbCloseSuccess,error:dbCloseError});return d}a.dev.error("Storage","Cannot close database before it is loaded.");throw"Must open a database before it can be closed."}return null},this)},collection:{create:u(function(b,c,d,e,f){var g;c==null&&(c=null),d==null&&(d=!0),e==null&&(e=null),f==null&&(f=null);if(this.storage.object._driver!==null){if(this.storage.object._db!==null){a.state.events.triggerEvent("STORAGE_COLLECION_CREATE",{type:"object",db:this.storage.object._db}),{collectionCreateSuccess:u(function(a){if(e!==null)return e(a)},this),collectionCreateError:u(function(a){if(f!==null)return f(a)},this)},g=this.storage.object._driver.createCollection(this.storage.object._db,b,c,d,{success:collectionCreateSuccess,error:collectionCreateError});return g}a.dev.error("Storage","Cannot call createCollection before loadDB.");throw"Must open a database before creating a collection."}return null},this),"delete":u(function(b,c,d){var e;c==null&&(c=null),d==null&&(d=null);if(this.storage.object._driver!==null){if(this.storage.object._db!==null){a.state.events.triggerEvent("STORAGE_COLLECTION_DELETE",{type:"object",name:b,db:this.storage.object._db}),{collectionDeleteSuccess:u(function(a){if(c!==null)return c(a)},this),collectionDeleteError:u(function(a){if(d!==null)return d(a)},this)},e=this.storage.object._driver.deleteCollection(this.storage.object._db,b,{success:collectionDeleteSuccess,error:collectionDeleteError});return e}a.dev.error("Storage","Cannot call deleteCollection before loadDB.");throw"Must open a database before deleting a collection."}return null},this),clear:u(function(b,c,d){var e;c==null&&(c=null),d==null&&(d=null);if(this.storage.object._driver!==null){if(this.storage.object._db!==null){a.state.events.triggerEvent("STORAGE_COLLECTION_CLEAR",{type:"object",name:b,db:this.storage.object._db}),{collectionClearSuccess:u(function(a){if(c!==null)return c(a)},this),collectionClearError:u(function(a){if(d!==null)return d(a)},this)},e=this.storage.object._driver.clearCollection(this.storage.object._db,b,{success:collectionDeleteSuccess,error:collectionDeleteError});return e}a.dev.error("Storage","Cannot call clearCollection before loadDB.");throw"Must open a database before clearing a collection."}return null},this)},get:u(function(b,c,d,e){var f;d==null&&(d=null),e==null&&(e=null);if(this.storage.object._driver!==null){if(this.storage.object._db!==null){a.state.events.triggerEvent("STORAGE_READ",{type:"object",mode:"key",collection:b,db:this.storage.object._db,key:c}),{entityGetSuccess:u(function(a){if(d!==null)return d(a)},this),entityGetError:u(function(a){if(e!==null)return e(a)},this)},f=this.storage.object._driver.getValueByKey(this.storage.object._db,b,c,{success:entityGetSuccess,error:entityGetError});return f}a.dev.error("Storage","Cannot call get before loadDB.");throw"Must open a database connection before keys can be retrieved."}return null},this),add:u(function(b,c,d,e,f){var g;d==null&&(d=null),e==null&&(e=null),f==null&&(f=null);if(this.storage.object._driver!==null){if(this.storage.object._db!==null){a.state.events.triggerEvent("STORAGE_WRITE",{type:"object",mode:"add",collection:c,db:this.storage.object._db,key:d}),{entityAddSuccess:u(function(a){if(e!==null)return e(a)},this),entityAddError:u(function(a){if(f!==null)return f(a)},this)},g=this.storage.object._driver.addValueByKey(this.storage.object._db,c,d,b,{success:entityAddSuccess,error:entityAddError});return g}a.dev.error("Storage","Cannot call add before loadDB.");throw"Must open a database connection before keys can be added."}return null},this),put:u(function(b,c,d,e,f){var g;d==null&&(d=null),e==null&&(e=null),f==null&&(f=null);if(this.storage.object._driver!==null){if(this.storage.object._db!==null){a.state.events.triggerEvent("STORAGE_WRITE",{type:"object",mode:"put",collection:c,db:this.storage.object._db,key:d}),{entityPutSuccess:u(function(a){if(e!==null)return e(a)},this),entityPutError:u(function(a){if(f!==null)return f(a)},this)},g=this.storage.object._driver.setValueByKey(this.storage.object._db,c,d,b,{success:entityPutSuccess,error:entityPutError});return g}a.dev.error("Storage","Cannot call get before loadDB.");throw"Must open a database connection before keys can be retrieved."}return null},this),"delete":u(function(b,c,d,e){var f;d==null&&(d=null),e==null&&(e=null);if(this.storage.object._driver===null)return!1;if(this.storage.object._db!==null){a.state.events.triggerEvent("STORAGE_DELETE",{type:"object",collection:b,db:this.storage.object._db,key:c}),{entityDeleteSuccess:u(function(a){if(d!==null)return d(a)},this),entityDeleteError:u(function(a){if(e!==null)return e(a)},this)},f=this.storage.object._driver.deleteByKey(this.storage.object._db,b,c,{success:entityDeleteSuccess,error:entityDeleteError});return f}},this)},sql:{_driver:null,_resolveDriver:function(){return this._driver=this.fcm.sys.drivers.resolve("sqlstorage")},getValue:function(a){return this._driver!==null?this._driver.getValueByKey(a):!1},setValue:function(a,b){return this._driver!==null?this._driver.setValueByKey(a,b):!1},clearValues:function(){return this._driver!==null?this._driver.allValues():!1}}},this.layout={register:u(function(b,c){c.register(b);return a.state.elements.register(b,c)},this),render:u(function(a,b){},this),renderTemplate:u(function(){var a,b;b=arguments[0],a=2<=arguments.length?x.call(arguments,1):[]},this)},a.state.events.registerEvent("MAP_REGISTERED"),a.state.events.registerEvent("MAP_DATA_CHANGE"),a.state.events.registerEvent("MAP_NODE_ADDED"),a.state.events.registerEvent("MAP_EDGE_ADDED"),a.state.events.registerEvent("MAP_DRAW"),a.state.events.registerEvent("MAP_SHIFT_ORIGIN"),this.visualizer={graph:{currentGraph:null,register:function(a){this.currentGraph=a},showMore:function(a){var b,c;$("#nodeDetails #node_label").text(a.label),$("#nodeDetails #node_kind").text(a.kind),b="",c=this.currentGraph.index.neighbors_by_node[a.key.encoded],_.each(c,u(function(a){return b+='<li><a href="#">'+a.label+"</a></li>"},this));return $("#nodeDetails #node_outgoing_edges").html(b)}}}}w(a,b);return a}(),k=function(){function a(a){a.state.events.registerEvent("USER_CHANGE"),this.current_user=null,this.is_user_admin=null,this.login_url=null,this.logout_url=null}w(a,b),a.prototype.setUserInfo=function(a){var b,c;b={},a.current_user!==null&&(this.current_user=a.current_user,b.current_user=this.current_user),a.is_user_admin!==null&&(this.is_user_admin=a.is_user_admin,b.is_user_admin=this.is_user_admin),a.login_url!==null&&(this.login_url=a.login_url,b.login_url=this.login_url),a.logout_url!==null&&(this.logout_url=a.logout_url,b.logout_url=this.logout_url),typeof $!="undefined"&&$!==null?c=$.fatcatmap:c=window.fatcatmap;return c.state.events.triggerEvent("USER_CHANGE",b)};return a}(),o=function(){function a(a,b,c,d){var e,f,g,h;this.name=a,this.base_uri=b,this.methods=c,this.config=d;if(this.methods.length>0){h=this.methods;for(f=0,g=h.length;f<g;f++)e=h[f],this[e]=this._buildRPCMethod(e,b,d)}}a.prototype._buildRPCMethod=function(a,b,c){var d,e;d=this.name,e=u(function(b,c,e,f){b==null&&(b={}),c==null&&(c=null),e==null&&(e=!1),f==null&&(f={});return u(function(b,c,e,f){var g,h;b==null&&(b={}),c==null&&(c=null),e==null&&(e=!1),f==null&&(f={}),typeof $!="undefined"&&$!==null?g=$.fatcatmap:g=window.fatcatmap,h=g.rpc.api.createRPCRequest({method:a,api:d,params:b||{},opts:f||{},async:e||!1});return c!==null?h.fulfill(c):h},this)(b,c,e,f)},this),typeof $!="undefined"&&$!==null?$.fatcatmap.rpc.registerAPIMethod(d,a,b,c):window.fatcatmap.rpc.registerAPIMethod(d,a,b,c);return e};return a}(),p=function(){function a(a){this.name=a}a.prototype.request=function(a){return a},a.prototype.response=function(a,b){if(y.call(b,"success")>=0)return window.fatcatmap.rpc.adapters.makeCallback(a,b.success)};return a}(),q=function(){function a(a,b,c){this.params={},this.action=null,this.method=null,this.api=null,this.base_uri=null,this.envelope={id:null,opts:{},agent:{}},this.ajax={async:!1,cache:!0,global:!0,http_method:"POST",crossDomain:!1,ifModified:!1,dataType:"json",contentType:"application/json"},a!=null&&(this.envelope.id=a),b!=null&&(this.envelope.opts=b),c!=null&&(this.envelope.agent=c)}a.prototype.fulfill=function(){var a,b;a=arguments[0],b=2<=arguments.length?x.call(arguments,1):[];return window.fatcatmap.rpc.api.fulfillRPCRequest(b,this,a)},a.prototype.setAsync=function(a){var b,c;(b=this.ajax)!=null&&((c=b.async)!=null?c:b.async=a);return this},a.prototype.setOpts=function(a){var b,c;(b=this.envelope)!=null&&((c=b.opts)!=null?c:b.opts=a);return this},a.prototype.setAgent=function(a){var b,c;(b=this.envelope)!=null&&((c=b.agent)!=null?c:b.agent=a);return this},a.prototype.setAction=function(a){this.action=a;return this},a.prototype.setMethod=function(a){this.method=a;return this},a.prototype.setAPI=function(a){this.api=a;return this},a.prototype.setBaseURI=function(a){this.base_uri=a;return this},a.prototype.setParams=function(a){this.params=a!=null?a:{};return this},a.prototype.payload=function(){var a;a={id:this.envelope.id,opts:this.envelope.opts,agent:this.envelope.agent,request:{params:this.params,method:this.method,api:this.api}};return a};return a}(),h=function(){function a(a){a.state.events.registerEvent("RPC_CREATE"),a.state.events.registerEvent("RPC_FULFILL"),a.state.events.registerEvent("RPC_SUCCESS"),a.state.events.registerEvent("RPC_ERROR"),a.state.events.registerEvent("RPC_COMPLETE"),window.amplify!=null&&(a.dev.verbose("RPC","AmplifyJS detected. Registering."),a.sys.drivers.register("transport","amplify",window.amplify,!0,!0)),this.base_rpc_uri="/_api/rpc",this.api={lastRequest:null,lastFailure:null,lastResponse:null,action_prefix:null,history:{},used_ids:[],factory:function(a,b,c,d){return this[a]=new o(a,b,c,d)},_assembleRPCURL:function(a,b,c,d){b==null&&(b=null),c==null&&(c=null),d==null&&(d=null);if(b===null&&d===null)throw"[RPC] Error: Must specify either an API or base URI to generate an RPC endpoint.";d===null&&(d=window.fatcatmap.rpc.api[b].base_uri);return c!==null?[c+d,a].join("."):[d,a].join(".")},provisionRequestID:function(){var a;if(this.used_ids.length>0){a=Math.max.apply(this,this.used_ids)+1,this.used_ids.push(a);return a}this.used_ids.push(1);return 1},decodeRPCResponse:function(a,b,c,d,e){return d(a,b)},createRPCRequest:function(a){var b;b=new q(this.provisionRequestID()),a.api!=null&&b.setAPI(a.api),a.method!=null&&b.setMethod(a.method),a.agent!=null&&b.setAgent(a.agent),a.opts!=null&&b.setOpts(a.opts),a.base_uri!=null&&b.setBaseURI(a.base_uri),a.params!=null&&b.setParams(a.params),a.async!=null&&b.setAsync(a.async),typeof $!="undefined"&&$!==null?$.fatcatmap.dev.log("RPC","New Request",b,a):window.fatcatmap.dev.log("RPC","New Request",b,a),b.setAction(this._assembleRPCURL(b.method,b.api,this.action_prefix,this.base_rpc_uri));return b},fulfillRPCRequest:function(b,c,d){var e;typeof $!="undefined"&&$!==null?$.fatcatmap.dev.log("RPC","Fulfill",b,c,d):window.fatcatmap.dev.log("RPC","Fulfill",b,c,d),this.lastRequest=c,this.history[c.envelope.id]={request:c,config:b,callbacks:d};if(c.action===null){if(c.method===null)throw"[RPC] Error: Request must specify at least an action or method.";if(c.base_uri===null){if(c.api===null)throw"[RPC] Error: Request must have an API or explicity BASE_URI.";c.action=this._assembleRPCURL(c.method,c.api,this.action_prefix)}else c.action=this._assembleRPCURL(c.method,null,this.action_prefix,c.base_uri)}if(c.action===null||c.action===void 0)throw"[RPC] Error: Could not determine RPC action.";e={config:b,request:c,callbacks:d},a.state.events.triggerEvent("RPC_FULFILL",e),function(b,c){var d,f,g,h,i;f=window.fatcatmap,i={resourceId:b.api+"."+b.method,url:b.action,data:JSON.stringify(b.payload()),async:b.ajax.async,global:b.ajax.global,type:b.ajax.http_method,crossDomain:b.ajax.crossDomain,dataType:b.ajax.dataType,processData:!1,ifModified:b.ajax.ifModified,contentType:b.ajax.contentType,beforeSend:u(function(a,c){f.rpc.api.history[b.envelope.id].xhr=a;return a},this),error:u(function(d,g,h){f.dev.error("RPC","Error: ",{error:h,status:g,xhr:d}),f.rpc.api.lastFailure=h,f.rpc.api.history[b.envelope.id].xhr=d,f.rpc.api.history[b.envelope.id].status=g,f.rpc.api.history[b.envelope.id].failure=h,e={xhr:d,status:g,error:h},f.state.events.triggerEvent("RPC_ERROR",e),a.state.events.triggerEvent("RPC_COMPLETE",e);return c!=null?c.failure(h):void 0},this),success:u(function(d,g,h){f.dev.log("RPC","Success",d,g,h),f.rpc.api.lastResponse=d,f.rpc.api.history[b.envelope.id].xhr=h,f.rpc.api.history[b.envelope.id].status=g,f.rpc.api.history[b.envelope.id].response=d,e={xhr:h,status:g,data:d},a.state.events.triggerEvent("RPC_SUCCESS",e),a.state.events.triggerEvent("RPC_COMPLETE",e),f.dev.verbose("RPC","Success callback",c);return c!=null?c.success(d):void 0},this),statusCode:{404:function(){f.dev.error("RPC","HTTP/404","Could not resolve RPC action URI.");return alert("RPC 404: Could not resolve RPC action URI.")},403:function(){f.dev.error("RPC","HTTP/403","Not authorized to access the specified endpoint.");return alert("RPC 403: Not authorized to access the specified endpoint.")},500:function(){f.dev.error("RPC","HTTP/500","Internal server error.");return alert("RPC 500: Woops! Something went wrong. Please try again.")}}},d=f.sys.drivers.resolve("transport","amplify"),d!=null?(f.dev.verbose("RPC","Fulfilling with AmplifyJS adapter."),h=d.request,g=h(i)):(f.dev.verbose("RPC","Fulfilling with AJAX adapter."),g=$.ajax(i));return f.dev.verbose("RPC","Resulting XHR: ",g)}(c,d);return{id:c.envelope.id,request:c}}},this.adapters={data:new p("data"),query:new p("query"),graph:new p("graph"),charts:new p("charts"),session:new p("session"),frame:new p("frame")},this.ext=null,a.state.events.registerHook("RPC_FULFILL",function(){return $.fatcatmap.state.events.triggerEvent("GLOBAL_ACTIVITY")}),a.state.events.registerHook("RPC_COMPLETE",function(){return $.fatcatmap.state.events.triggerEvent("GLOBAL_ACTIVITY_FINISH")})}w(a,b),a.prototype.registerAPIMethod=function(a,b,c,d){var e,f,g,h;typeof $!="undefined"&&$!==null?g=$.fatcatmap:g=window.fatcatmap,e=g.sys.drivers.resolve("transport","amplify");if(e!==!1){g.dev.log("RPCAPI",'Registering request procedure "'+a+"."+b+'" with AmplifyJS.'),h=a+"."+b,f={type:"POST",dataType:"json",contentType:"application/json",url:this.api._assembleRPCURL(b,a,null,c),decoder:this.api.decodeRPCResponse};if(d.caching!=null){d.caching===!0&&(f.caching="persist");return e.request.define(h,"ajax",f)}return e.request.define(h,"ajax",f)}};return a}(),window.RPCAPI=o,window.RPCAdapter=p,window.RPCRequest=q,s=function(){function a(a,b,c){this.name=a,this.path=b,this.config=c}return a}(),f=function(){function a(a){this.fcm=a,this.onClose=u(this.onClose,this),this.onError=u(this.onError,this),this.onMessage=u(this.onMessage,this),this.onOpen=u(this.onOpen,this),this.listen=u(this.listen,this),this.openChannel=u(this.openChannel,this),this.fcm.state.events.registerEvent("CHANNEL_OPEN"),this.fcm.state.events.registerEvent("CHANNEL_MESSAGE"),this.fcm.state.events.registerEvent("CHANNEL_ERROR"),this.fcm.state.events.registerEvent("CHANNEL_CLOSE"),this.token=null,this.channel=null,this.socket=null}w(a,b),a.prototype.openChannel=function(a){var b;this.token=a,this.fcm.dev.debug.log("CoreLive","Opening channel.",this.token);try{this.channel=typeof goog!="undefined"&&goog!==null?(b=goog.appengine)!=null?new b.Channel(this.token):void 0:void 0,this.socket=this.channel.open(),this.socket.onopen=this.onOpen,this.socket.onmessage=this.onMessage,this.socket.onerror=this.onError,this.socket.onclose=this.onClose}catch(c){this.fcm.dev.debug.error("CoreLive","Encountered error preparing live channel.",c);return{channel:!1,socket:!1}}return{channel:channel,socket:socket}},a.prototype.listen=function(a){if(this.channel===null&&this.socket===null)return this.openChannel(a)},a.prototype.onOpen=function(){this.fcm.dev.debug.log("CoreLive","Channel is ready to receive live messages.");return this.fcm.state.events.triggerEvent("CHANNEL_OPEN")},a.prototype.onMessage=function(a){this.fcm.dev.debug.verbose("CoreLive","Channel message received.",a);return this.fcm.state.events.triggerEvent("CHANNEL_MESSAGE",a)},a.prototype.onError=function(a){this.fcm.dev.debug.error("CoreLive","Encountered channel error.",a);return this.fcm.state.events.triggerEvent("CHANNEL_ERROR",a)},a.prototype.onClose=function(){this.fcm.dev.debug.log("CoreLive","Channel has been closed.");return this.fcm.state.events.triggerEvent("CHANNEL_CLOSE")
};return a}(),t=function(){function a(a,b){var c;this.name=a,this.config=b,typeof $!="undefined"&&$!==null?c=$.fatcatmap:c=window.fatcatmap,c.sys.drivers.register(this.name,"native",this,999,!0)}a.prototype.getValueByKey=function(a){},a.prototype.setValueByKey=function(a,b){},a.prototype.addValueByKey=function(a,b){},a.prototype.deleteByKey=function(a){},a.prototype.nuke=function(){},a.prototype.allValues=function(){};return a}(),a=function(){function a(){a.__super__.constructor.apply(this,arguments)}w(a,t),a.prototype.openDatabase=function(a,b){},a.prototype.deleteDatabase=function(a,b){},a.prototype.setDatabaseVerison=function(a,b,c){},a.prototype.closeDatabase=function(a,b){},a.prototype.createCollection=function(a,b,c,d,e){},a.prototype.deleteCollection=function(a,b,c){},a.prototype.clearCollection=function(a,b,c){};return a}(),typeof window!="undefined"&&window!==null&&(window.StorageDriver=t,window.AdvancedStorageDriver=a),l=function(){function a(a){this.config=a,this.dev=new e(this),this.sys=new j(this),this.agent=new d(this),this.agent.discover(),this.state=new i(this),this.state.events.registerEvent("RPC_READY"),this.state.events.registerEvent("API_READY"),this.state.events.registerEvent("CORE_READY"),this.state.events.registerEvent("DRIVER_REGISTERED"),this.state.events.registerEvent("REGISTER_ELEMENT"),this.state.events.registerEvent("PLATFORM_READY"),this.state.events.triggerEvent("GLOBAL_ACTIVITY"),this.state.events.registerHook("PLATFORM_READY",u(function(){return this.state.events.triggerEvent("GLOBAL_ACTIVITY_FINISH")},this)),this.model=new g(this),this.api=new c(this),this.user=new k(this),this.rpc=new h(this),this.live=new f(this);return this}return a}(),window.fatcatmap=new l,typeof $!="undefined"&&$!==null&&$.extend({fatcatmap:window.fatcatmap}),window.fatcatmap.state.events.triggerEvent("CORE_READY")}).call(this)